<?xml version="1.0" encoding="UTF-8"?>

<beans xmlns="http://www.springframework.org/schema/beans"
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	xmlns:aop="http://www.springframework.org/schema/aop"
	xmlns:tx="http://www.springframework.org/schema/tx"
	xmlns:context="http://www.springframework.org/schema/context"
	xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.0.xsd          
         http://www.springframework.org/schema/tx http://www.springframework.org/schema/tx/spring-tx-3.0.xsd
		http://www.springframework.org/schema/aop http://www.springframework.org/schema/aop/spring-aop-3.0.xsd
		http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-3.0.xsd">

	<!--  Farm Application Bean -->
	<bean id="farmApplication" class="com.dblue.farm.application.FarmApplication">
	</bean>

	<import resource="objectContext.xml" />
	<import resource="task-Context.xml"/>
	<import resource="security-Context.xml"/>
	<import resource="dao-Context.xml"/>
	<import resource="licensing-Context.xml"/>
 
 	<bean id="dataSource" class="org.apache.commons.dbcp.BasicDataSource">
		<property name="driverClassName" value="com.mysql.jdbc.Driver" />
		<property name="url" value="jdbc:mysql://localhost/farm" />
		<property name="username" value="root" />
		<property name="password" value="root" />
	</bean>
 


	<!--  JBOSS Specific configuration -->
 	<!-- 
 	<bean id="dataSource" class="org.springframework.jndi.JndiObjectFactoryBean">
		<property name="jndiName">
			<value>java:comp/env/jdbc/farmdatasource</value>
		</property>
	</bean>
	 -->
 
	<!-- The Hibernate interceptor, which takes care of opening and closing hibernate session around method calls. -->
    <bean id="hibernateInterceptor" class="org.springframework.orm.hibernate3.HibernateInterceptor">
        <property name="sessionFactory">
            <ref bean="sessionFactory"/>
        </property>
    </bean>

	<!-- Transaction management -->
	<bean id="transactionManager"
		class="org.springframework.orm.hibernate3.HibernateTransactionManager">
		<property name="sessionFactory" ref="sessionFactory" />
	</bean>
		
	<tx:annotation-driven transaction-manager="transactionManager" />

	<!-- Hibernate session management -->
	<bean id="sessionFactory"
		class="org.springframework.orm.hibernate3.LocalSessionFactoryBean">
		<property name="dataSource" ref="dataSource"></property>
		<property name="mappingResources">
			<list>
				<value>hibernatemappings/Vaccination.hbm.xml</value>
				<value>hibernatemappings/DeceaseType.hbm.xml</value>
				<value>hibernatemappings/FeedingHistory.hbm.xml</value>
				<value>hibernatemappings/BreedType.hbm.xml</value>
				<value>hibernatemappings/MilkingStatus.hbm.xml</value>
				<value>hibernatemappings/Person.hbm.xml</value>
				<value>hibernatemappings/ProvisionInventory.hbm.xml</value>
				<value>hibernatemappings/VendorType.hbm.xml</value>
				<value>hibernatemappings/Vendor.hbm.xml</value>
				<value>hibernatemappings/Contact.hbm.xml</value>
				<value>hibernatemappings/Asset.hbm.xml</value>
				<value>hibernatemappings/PromotionHistory.hbm.xml</value>
				<value>hibernatemappings/FeedingConfig.hbm.xml</value>
				<value>hibernatemappings/AssetType.hbm.xml</value>
				<value>hibernatemappings/Decease.hbm.xml</value>
				<value>hibernatemappings/DeVermitizationType.hbm.xml</value>
				<value>hibernatemappings/Livestock.hbm.xml</value>
				<value>hibernatemappings/Statistics.hbm.xml</value>
				<value>hibernatemappings/VaccineType.hbm.xml</value>
				<value>hibernatemappings/Inventory.hbm.xml</value>
				<value>hibernatemappings/Health.hbm.xml</value>
				<value>hibernatemappings/OriginType.hbm.xml</value>
				<value>hibernatemappings/Farm.hbm.xml</value>
				<value>hibernatemappings/Purchases.hbm.xml</value>
				<value>hibernatemappings/ReceiptType.hbm.xml</value>
				<value>hibernatemappings/Production.hbm.xml</value>
				<value>hibernatemappings/ProductionFarm.hbm.xml</value>
				<value>hibernatemappings/Devermitization.hbm.xml</value>
				<value>hibernatemappings/ProductionConfig.hbm.xml</value>
				<value>hibernatemappings/Expenses.hbm.xml</value>
				<value>hibernatemappings/ExpenseType.hbm.xml</value>
				<!-- <value>hibernatemappings/StockType.hbm.xml</value> -->
				<value>hibernatemappings/Images.hbm.xml</value>
				<value>hibernatemappings/FeedType.hbm.xml</value>
				<value>hibernatemappings/Address.hbm.xml</value>
				<value>hibernatemappings/StateType.hbm.xml</value>
				<value>hibernatemappings/StockCategory.hbm.xml</value>
				<value>hibernatemappings/StockType.hbm.xml</value>				
				<value>hibernatemappings/StockAudit.hbm.xml</value>
				<value>hibernatemappings/IngredientType.hbm.xml</value>
				<value>hibernatemappings/Ingredient.hbm.xml</value>
				<value>hibernatemappings/IngredientOptions.hbm.xml</value>
				<value>hibernatemappings/Provisions.hbm.xml</value>
				<value>hibernatemappings/Reproduction.hbm.xml</value>
				<value>hibernatemappings/SuggestedFeeding.hbm.xml</value>
				<value>hibernatemappings/FarmConfiguration.hbm.xml</value>
				<value>hibernatemappings/Lactation.hbm.xml</value>
			</list>
		</property>
		<property name="hibernateProperties">
			<props>
				<prop key="hibernate.dialect">
					org.hibernate.dialect.MySQLDialect
				</prop>
				<prop key="hibernate.show_sql">true</prop>
				<prop key="hibernate.connection.release_mode">
					on_close
				</prop>				
				<prop key="hibernate.default_catalog">farm</prop>
			</props>
		</property>
	</bean>
	
	<bean id="farmConfigurationProvider" class="com.dblue.farm.application.FarmConfigurationProvider">
		<property name="objectLoader" ref="objectLoader"></property>
	</bean>
 </beans>