<ion-header>
   <ion-navbar>
      <ion-title>
         <ion-item no-lines style="padding-left:0px;" class="header__styles">
            <ion-avatar item-start>
               <img src="{{imageEndPoint}}/{{getMallDetailsResp.img}}">
            </ion-avatar>
            <h2 class="ion__title">{{getMallDetailsResp.name}} <span class="outletNameCss" *ngIf = "(allpermited !='Yes')"> ({{getOutletDetailsVal.name}})</span></h2>
            <p class="pending__order padding__left">{{getMallDetailsResp.address.area}}, {{getMallDetailsResp.address.city}}</p>
            <!-- <div class="padding__top" item-end>
               <ion-icon class="ion__title" name="search"></ion-icon>
            </div> -->
            <div class="ion__title" item-end (click)="logoutSupplier()">
               <ion-icon name="log-out"></ion-icon>
            </div>
         </ion-item>
      </ion-title>
   </ion-navbar>
</ion-header>
<ion-content class="main__div">
   <div ion-fixed style="width:100%" *ngIf="stockShow && !showLoader">
      <div class="outlet-list">
         <div class="scrollable-segments">
            <ion-segment [(ngModel)]="selectedOutletForSegment" color="" id="outlet-segment">
            <ion-segment-button *ngFor="let outlet of outlets" value="outlet.name" (click)="setOutletId(outlet)" [id]="outlet.id" [ngClass]="{'outlet-selected':selectedOutlet.name == outlet.name, 'outlet-unselected': selectedOutlet.name != outlet.name, 'outlet-disabled':!outlet.availability.available}">
            <div>
               <img class="outlet-image" src="{{imageEndPoint}}/{{outlet.img}}" />
               <div class="outlet-name">{{outlet.name}}</div>
            </div>
            </ion-segment-button>
            </ion-segment>
         </div>
      </div>
   </div>
   <div  style="margin-top:110px" *ngIf="stockShow && !showLoader">
      <div>
         <ion-item style="background:#f8f8f8;border-bottom: 3px solid #c2c0c0;">
            <ion-label class="order__Details">Outlet Open</ion-label>
            <ion-toggle [(ngModel)]="availability" ></ion-toggle>
         </ion-item>
         <div  *ngIf="availability">
            <ion-row>
               <ion-col col-2>
                  <ion-item>
                   <ion-label>{{StockData[0].availability.logicType}}</ion-label>
                   </ion-item>
               </ion-col>
               <ion-col col-5>
                  <ion-item>
                     <ion-label>Start Time</ion-label>
                   </ion-item>
               </ion-col>
               <ion-col col-5>
                  <ion-item>
                     <ion-label>End Time</ion-label>
                   </ion-item>
               </ion-col>
            </ion-row>
            <ion-row>
               <ion-col col-2>
                  <ion-item>
                     <input type="radio" name="openClose" value="1" [checked]="outletOpen" (click)="checkOpen()"> Open<br>
                   </ion-item>
               </ion-col>
               <ion-col col-5>
                  <ion-item>
                     <ion-select [(ngModel)]="openStartTime" multiple="false" [disabled]="!open">
                        <ion-option *ngFor="let time  of times" value="{{time}}">{{time}}</ion-option>
                        </ion-select>
                   </ion-item>
               </ion-col>
               <ion-col col-5>
                  <ion-item>
                     <ion-select [(ngModel)]="openEndTime" multiple="false"  [disabled]="!open">
                        <ion-option *ngFor="let time  of times" value="{{time}}">{{time}}</ion-option>
                        </ion-select>
                   </ion-item>
               </ion-col>
            </ion-row>
            <ion-row>
               <ion-col col-2>
                  <ion-item>
                     <input type="radio" name="openClose" value="2" [checked]="outletClose" (click)="checkClose()"> Close<br>
                   </ion-item>
               </ion-col>
               <ion-col col-5>
                  <ion-item>
                     <ion-select [(ngModel)]="closeStartTime" multiple="false"  [disabled]="!close" >
                        <ion-option *ngFor="let time  of times" value="{{time}}">{{time}}</ion-option>
                        </ion-select>
                   </ion-item>
               </ion-col>
               <ion-col col-5>
                  <ion-item>
                     <ion-select [(ngModel)]="closeEndTime" multiple="false"  [disabled]="!close">
                        <ion-option *ngFor="let time  of times" value="{{time}}">{{time}}</ion-option>
                        </ion-select>
                   </ion-item>
               </ion-col>
            </ion-row>
         </div>
         <div >
            <ion-item  >
               <ion-label>Weeks</ion-label>
               <ion-select [(ngModel)]="weeks" multiple="true">
               <ion-option>Sun</ion-option>
               <ion-option>Mon</ion-option>
               <ion-option>Tue</ion-option>
               <ion-option>Wed</ion-option>
               <ion-option>Thu</ion-option>
               <ion-option>Fri</ion-option>
               <ion-option>Sat</ion-option>
               </ion-select>
            </ion-item>
            <!-- <ion-item>
               <ion-label>Start Time </ion-label>
               <ion-datetime displayFormat="HH:mm" [(ngModel)]="startTime" (ionChange)="getOutletStartTime()"></ion-datetime>
            </ion-item>
            <ion-item>
               <ion-label>End Time </ion-label>
               <ion-datetime displayFormat="HH:mm" [(ngModel)]="endTime" (ionChange)="getOutletEndTime()"></ion-datetime>
            </ion-item> -->
            <ion-item no-lines>
                  <div class="displayFlex">
                     <span  style="color: #999;"> Supplier Discount</span>
                     <span class="" style="color:#e46d47; font-weight:bold;padding-right: 10px;">{{outletDiscount}}</span>
                  </div>
            </ion-item>
            
                <ion-item>
                    
                  <!-- <ion-range min="0" max="50" pin="true" [(ngModel)]="outletDiscount" color="secondary">
                    <ion-icon range-left small name="eye"></ion-icon>
                    <ion-icon range-right name="eye"></ion-icon>
                    
                  </ion-range> -->
                  <ion-input type="number"   [(ngModel)]="outletDiscount"  min="1" max="90" (ionChange)="validateInputValue(outletDiscount)"></ion-input>

                </ion-item>
               
            <!-- <ion-item>
               <ion-label>Outlet Discount(%)</ion-label>
               <ion-input type="number" class="text__align__right" (keypress)="decimalAllow($event)" [(ngModel)]="outletDiscount"></ion-input>     
            </ion-item> -->
            <ion-item>
               <span style="float:right;"><button class="aceptStyle" icon-start ion-button outline small color="secondary" disabled={{buttonDisabled}} (click) ="updateOutletDiscount()">
                  <ion-icon name="bookmark"></ion-icon>
                  Update
                </button></span>   
            </ion-item>
        </div>

      </div>
      <ion-item style="background:#f8f8f8;" >
         <ion-label class="order__Details">Sub Menus</ion-label>
      </ion-item>
      <div *ngFor="let stock of StockData">
         <div *ngFor="let stocksubMenus of stock.subMenus" >
            <div class="item__level__Styles" >
               <ion-item *ngIf ="stocksubMenus.itemIds.length >0">
                  <div class="stock__items__styles" >
                     <span (click) = getsubMenu(stocksubMenus) class="item__Details">
                     {{stocksubMenus.name}}
                     </span> 
                     <span (click)="getStockSubMenusItems(stocksubMenus, outletId)"></span>
                  </div>
               </ion-item>
            </div>
         </div>
      </div>
   </div>
   <div *ngIf="stockMessage"><h1>You are not authorized.</h1></div>
   <page-globalloader *ngIf="showLoader"></page-globalloader>
</ion-content>